<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2S時間割</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
    <style>
        body {
            font-size: 0.9rem;
        }
        @media (max-width: 576px) {
            body {
                font-size: 0.75rem;
            }
            h1 {
                font-size: 1.5rem !important;
            }
            th, td {
                padding: 0.3rem !important;
                font-size: 0.7rem;
            }
        }
        .current-period {
            background-color: #ffeb3b !important;
            font-weight: bold;
            box-shadow: inset 0 0 10px rgba(255, 235, 59, 0.8);
        }
    </style>
</head>

<body>
    <div class="container-fluid px-2 mt-3">
        <h1 class="text-center mb-3">時間割表</h1>
        <div class="table-responsive">
            <table class="table table-bordered table-sm">
            <thead class="table-primary">
                <tr>
                    <th style="width: 15%;">時限</th>
                    <th style="width: 17%;">月</th>
                    <th style="width: 17%;">火</th>
                    <th style="width: 17%;">水</th>
                    <th style="width: 17%;">木</th>
                    <th style="width: 17%;">金</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <th>1限</th>
                    <td>英語2</td>
                    <td>保健体育2</td>
                    <td>公共</td>
                    <td>英語2</td>
                    <td>製図</td>
                </tr>
                <tr>
                    <th>2限</th>
                    <td>化学2</td>
                    <td>数学2A</td>
                    <td>数学2B</td>
                    <td>数学2A</td>
                    <td>プログラミング2</td>
                </tr>
                <tr>
                    <th>3限</th>
                    <td>国語2</td>
                    <td>英語表現2</td>
                    <td>物理</td>
                    <td>物理</td>
                    <td>化学実験</td>
                </tr>
                <tr>
                    <th>4限</th>
                    <td>歴史</td>
                    <td></td>
                    <td>HR</td>
                    <td></td>
                    <td>化学実験</td>
                </tr>
            </tbody>
        </table>
        </div>
    </div>

    <script>
        function highlightCurrentPeriod() {
            const now = new Date();
            const dayOfWeek = now.getDay(); // 0=日曜, 1=月曜, 2=火曜, 3=水曜, 4=木曜, 5=金曜, 6=土曜
            const currentTime = now.getHours() * 100 + now.getMinutes(); // HHmm形式

            // 授業時間の定義（開始時間と終了時間）
            const periods = [
                { start: 845, end: 1020 },   // 1限: 8:50-9:40
                { start: 1025, end: 1200 },  // 2限: 9:50-10:40
                { start: 1255, end: 1430 }, // 3限: 10:50-11:40
                { start: 1440, end: 1610 }  // 4限: 12:50-13:40
            ];

            // 平日のみ処理（月曜=1から金曜=5）
            if (dayOfWeek >= 1 && dayOfWeek <= 5) {
                // 現在時刻が授業時間内かチェック
                for (let i = 0; i < periods.length; i++) {
                    if (currentTime >= periods[i].start && currentTime <= periods[i].end) {
                        // 該当する時限の該当する曜日のセルをハイライト
                        const row = i + 1; // 1限=行1、2限=行2...
                        const col = dayOfWeek; // 月曜=1、火曜=2...

                        // テーブルの該当セルを取得
                        const table = document.querySelector('table tbody');
                        const targetCell = table.rows[i].cells[col];

                        if (targetCell) {
                            targetCell.classList.add('current-period');
                        }
                        break;
                    }
                }
            }
        }

        // ページ読み込み時に実行
        document.addEventListener('DOMContentLoaded', highlightCurrentPeriod);

        // 1分ごとに更新
        setInterval(() => {
            // 既存のハイライトを削除
            document.querySelectorAll('.current-period').forEach(cell => {
                cell.classList.remove('current-period');
            });
            // 新しいハイライトを適用
            highlightCurrentPeriod();
        }, 60000);
    </script>
</body>